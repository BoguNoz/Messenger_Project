@model IEnumerable<Common.DTO.User.UserResponseDto>
@{
    ViewData["Title"] = "Użytkownicy";
    Layout = "_Layout";
}

<div class="container py-4">
    <div class="container py-4">
        <ul class="nav nav-tabs" id="userTabs" role="tablist">
            <li class="nav-item">
                <a class="nav-link active" id="login-tab" data-bs-toggle="tab" href="#loginTab">Logowanie</a>
            </li>
            <li class="nav-item">
                <a class="nav-link" id="register-tab" data-bs-toggle="tab" href="#registerTab">Rejestracja</a>
            </li>
        </ul>

        <div class="tab-content mt-3">
            <!-- Logowanie -->
            <div class="tab-pane fade show active" id="loginTab" role="tabpanel">
                @using (Html.BeginForm("Login", "User", FormMethod.Post))
                {
                    @Html.AntiForgeryToken()
                    <div class="mb-3">
                        <label class="form-label">Email</label>
                        <input name="email" type="email" class="form-control" required />
                    </div>
                    <div class="mb-3">
                        <label class="form-label">Hasło</label>
                        <input name="password" type="password" class="form-control" required />
                    </div>
                    <button type="submit" class="btn btn-primary">Zaloguj</button>
                }
            </div>

            <!-- Rejestracja -->
            <div class="tab-pane fade" id="registerTab" role="tabpanel">
                @using (Html.BeginForm("Register", "User", FormMethod.Post))
                {
                    @Html.AntiForgeryToken()
                    <div class="mb-3">
                        <label class="form-label">Imię i nazwisko</label>
                        <input name="Name" class="form-control" required />
                    </div>
                    <div class="mb-3">
                        <label class="form-label">Email</label>
                        <input name="Email" type="email" class="form-control" required />
                    </div>
                    <div class="mb-3">
                        <label class="form-label">Hasło</label>
                        <input name="Password" type="password" class="form-control" required />
                    </div>
                    <button type="submit" class="btn btn-success">Zarejestruj</button>
                }
            </div>
        </div>

        @if (TempData["Error"] != null)
        {
            <div class="mt-2 alert alert-danger">@TempData["Error"]</div>
        }
        @if (TempData["Message"] != null)
        {
            <div class="mt-2 alert alert-success">@TempData["Message"]</div>
        }
    </div>

</div>

@section Scripts {
    <script>
        document.querySelectorAll('label.btn input[type="file"]').forEach(input => {
            input.addEventListener('change', e => {
                const fileName = e.target.files[0]?.name || '';
                e.target.closest('label').querySelector('i').textContent = fileName ? '📌' : '';
            });
        });
    </script>
}
